<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œ ER ë‹¤ì´ì–´ê·¸ë¨ (ê¸°ë³¸)</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
        }
        .badge {
            display: inline-block;
            padding: 5px 15px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 12px;
            margin: 0 5px;
        }
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0 30px 0;
            flex-wrap: wrap;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .legend-shape {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: #333;
        }
        .entity-box {
            width: 80px;
            height: 40px;
            background: #ffb3ba;
            border: 2px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .relationship-diamond {
            width: 60px;
            height: 60px;
            background: #ffdfba;
            border: 2px solid #000;
            transform: rotate(45deg);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .relationship-text {
            transform: rotate(-45deg);
            font-size: 11px;
        }
        .attribute-oval {
            width: 70px;
            height: 35px;
            background: #ffffba;
            border: 2px solid #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
        }
        #diagram-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .info-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .info-box h3 {
            margin-top: 0;
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¦ ê°€ìƒ ì£¼ì‹ ê±°ë˜ ì‹œìŠ¤í…œ</h1>
        <div class="subtitle">
            <span class="badge">ì „í†µì  ER ë‹¤ì´ì–´ê·¸ë¨</span>
            <span class="badge">4ê°œ ì—”í‹°í‹°</span>
            <span class="badge">Chen í‘œê¸°ë²•</span>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-shape entity-box">ì—”í‹°í‹°</div>
                <span>ì‚¬ê°í˜•: ê°œì²´(Entity)</span>
            </div>
            <div class="legend-item">
                <div class="legend-shape relationship-diamond">
                    <span class="relationship-text">ê´€ê³„</span>
                </div>
                <span>ë§ˆë¦„ëª¨: ê´€ê³„(Relationship)</span>
            </div>
            <div class="legend-item">
                <div class="legend-shape attribute-oval">ì†ì„±</div>
                <span>íƒ€ì›: ì†ì„±(Attribute)</span>
            </div>
            <div class="legend-item">
                <span style="text-decoration: underline; font-weight: bold;">ë°‘ì¤„</span>
                <span>: ê¸°ë³¸í‚¤(Primary Key)</span>
            </div>
        </div>

        <div id="diagram-container">
            <div class="mermaid">
graph TB
    %% USERS ì—”í‹°í‹°
    USERS[USERS<br/>ì‚¬ìš©ì]
    
    %% USERS ì†ì„±
    U_ID(("<u>id</u>"))
    U_USERNAME((username))
    U_EMAIL((email))
    U_PASSWORD((password))
    U_BALANCE((balance<br/>ì”ì•¡))
    U_CREATED((created_at))
    U_UPDATED((updated_at))
    
    %% PORTFOLIOS ì—”í‹°í‹°
    PORTFOLIOS[PORTFOLIOS<br/>í¬íŠ¸í´ë¦¬ì˜¤]
    
    %% PORTFOLIOS ì†ì„±
    P_ID(("<u>id</u>"))
    P_SYMBOL((symbol<br/>ì¢…ëª©ì½”ë“œ))
    P_QUANTITY((quantity<br/>ìˆ˜ëŸ‰))
    P_AVG_PRICE((avg_price<br/>í‰ê· ê°€))
    P_MARKET((market<br/>ì‹œì¥))
    P_CREATED((created_at))
    P_UPDATED((updated_at))
    
    %% TRANSACTIONS ì—”í‹°í‹°
    TRANSACTIONS[TRANSACTIONS<br/>ê±°ë˜ë‚´ì—­]
    
    %% TRANSACTIONS ì†ì„±
    T_ID(("<u>id</u>"))
    T_SYMBOL((symbol))
    T_TYPE((type<br/>ë§¤ìˆ˜/ë§¤ë„))
    T_QUANTITY((quantity))
    T_PRICE((price))
    T_COMMISSION((commission<br/>ìˆ˜ìˆ˜ë£Œ))
    T_TOTAL((total_amount))
    T_MARKET((market))
    T_TIMESTAMP((timestamp))
    
    %% STOCK_CACHE ì—”í‹°í‹°
    STOCK_CACHE[STOCK_CACHE<br/>ì£¼ì‹ìºì‹œ]
    
    %% STOCK_CACHE ì†ì„±
    S_ID(("<u>id</u>"))
    S_SYMBOL((symbol))
    S_NAME((name<br/>íšŒì‚¬ëª…))
    S_CURRENT((current_price))
    S_PREV((previous_close))
    S_OPEN((open_price))
    S_HIGH((high_price))
    S_LOW((low_price))
    S_VOLUME((volume))
    S_CHANGE((change))
    S_PERCENT((change_percent))
    S_MARKET((market))
    S_CURRENCY((currency))
    S_RATE((exchange_rate))
    S_UPDATED((updated_at))
    
    %% ê´€ê³„: ë³´ìœ 
    HAS{ë³´ìœ <br/>HAS}
    
    %% ê´€ê³„: ê±°ë˜
    TRADE{ê±°ë˜<br/>TRADE}
    
    %% USERS ì†ì„± ì—°ê²°
    U_ID --- USERS
    U_USERNAME --- USERS
    U_EMAIL --- USERS
    U_PASSWORD --- USERS
    U_BALANCE --- USERS
    U_CREATED --- USERS
    U_UPDATED --- USERS
    
    %% PORTFOLIOS ì†ì„± ì—°ê²°
    P_ID --- PORTFOLIOS
    P_SYMBOL --- PORTFOLIOS
    P_QUANTITY --- PORTFOLIOS
    P_AVG_PRICE --- PORTFOLIOS
    P_MARKET --- PORTFOLIOS
    P_CREATED --- PORTFOLIOS
    P_UPDATED --- PORTFOLIOS
    
    %% TRANSACTIONS ì†ì„± ì—°ê²°
    T_ID --- TRANSACTIONS
    T_SYMBOL --- TRANSACTIONS
    T_TYPE --- TRANSACTIONS
    T_QUANTITY --- TRANSACTIONS
    T_PRICE --- TRANSACTIONS
    T_COMMISSION --- TRANSACTIONS
    T_TOTAL --- TRANSACTIONS
    T_MARKET --- TRANSACTIONS
    T_TIMESTAMP --- TRANSACTIONS
    
    %% STOCK_CACHE ì†ì„± ì—°ê²°
    S_ID --- STOCK_CACHE
    S_SYMBOL --- STOCK_CACHE
    S_NAME --- STOCK_CACHE
    S_CURRENT --- STOCK_CACHE
    S_PREV --- STOCK_CACHE
    S_OPEN --- STOCK_CACHE
    S_HIGH --- STOCK_CACHE
    S_LOW --- STOCK_CACHE
    S_VOLUME --- STOCK_CACHE
    S_CHANGE --- STOCK_CACHE
    S_PERCENT --- STOCK_CACHE
    S_MARKET --- STOCK_CACHE
    S_CURRENCY --- STOCK_CACHE
    S_RATE --- STOCK_CACHE
    S_UPDATED --- STOCK_CACHE
    
    %% ê´€ê³„ ì—°ê²°
    USERS ---|1| HAS
    HAS ---|N| PORTFOLIOS
    
    USERS ---|1| TRADE
    TRADE ---|N| TRANSACTIONS
    
    %% ìŠ¤íƒ€ì¼ ì •ì˜
    classDef entityStyle fill:#ffb3ba,stroke:#333,stroke-width:3px,color:#000
    classDef attrStyle fill:#ffffba,stroke:#333,stroke-width:2px,color:#000
    classDef pkStyle fill:#baffc9,stroke:#333,stroke-width:2px,color:#000,text-decoration:underline
    classDef relStyle fill:#ffdfba,stroke:#333,stroke-width:3px,color:#000
    
    class USERS,PORTFOLIOS,TRANSACTIONS,STOCK_CACHE entityStyle
    class HAS,TRADE relStyle
    class U_ID,P_ID,T_ID,S_ID pkStyle
    class U_USERNAME,U_EMAIL,U_PASSWORD,U_BALANCE,U_CREATED,U_UPDATED attrStyle
    class P_SYMBOL,P_QUANTITY,P_AVG_PRICE,P_MARKET,P_CREATED,P_UPDATED attrStyle
    class T_SYMBOL,T_TYPE,T_QUANTITY,T_PRICE,T_COMMISSION,T_TOTAL,T_MARKET,T_TIMESTAMP attrStyle
    class S_SYMBOL,S_NAME,S_CURRENT,S_PREV,S_OPEN,S_HIGH,S_LOW,S_VOLUME,S_CHANGE,S_PERCENT,S_MARKET,S_CURRENCY,S_RATE,S_UPDATED attrStyle
            </div>
        </div>

        <div class="info-box">
            <h3>ğŸ“Š ì—”í‹°í‹° ì„¤ëª…</h3>
            <ul>
                <li><strong>USERS (ì‚¬ìš©ì):</strong> ì‹œìŠ¤í…œ ì‚¬ìš©ì ì •ë³´</li>
                <li><strong>PORTFOLIOS (í¬íŠ¸í´ë¦¬ì˜¤):</strong> ì‚¬ìš©ìê°€ ë³´ìœ í•œ ì£¼ì‹ ì •ë³´</li>
                <li><strong>TRANSACTIONS (ê±°ë˜ë‚´ì—­):</strong> ëª¨ë“  ë§¤ìˆ˜/ë§¤ë„ ê±°ë˜ ê¸°ë¡</li>
                <li><strong>STOCK_CACHE (ì£¼ì‹ìºì‹œ):</strong> ì£¼ì‹ ê°€ê²© ì •ë³´ (ë…ë¦½ ì—”í‹°í‹°)</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>ğŸ”— ê´€ê³„ ì„¤ëª…</h3>
            <ul>
                <li><strong>ë³´ìœ  (HAS):</strong> ì‚¬ìš©ì(1) â†” í¬íŠ¸í´ë¦¬ì˜¤(N) - í•œ ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ì£¼ì‹ ë³´ìœ </li>
                <li><strong>ê±°ë˜ (TRADE):</strong> ì‚¬ìš©ì(1) â†” ê±°ë˜ë‚´ì—­(N) - í•œ ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ ê±°ë˜ ìˆ˜í–‰</li>
                <li><strong>STOCK_CACHE:</strong> ë…ë¦½ ì—”í‹°í‹° (ë‹¤ë¥¸ ì—”í‹°í‹°ì™€ ê´€ê³„ ì—†ìŒ)</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>ğŸ¨ ìƒ‰ìƒ êµ¬ë¶„</h3>
            <ul>
                <li><strong style="color: #ff8a8a;">ë¶„í™ìƒ‰ ì‚¬ê°í˜•:</strong> ì—”í‹°í‹° (ê°œì²´)</li>
                <li><strong style="color: #ffb366;">ì£¼í™©ìƒ‰ ë§ˆë¦„ëª¨:</strong> ê´€ê³„</li>
                <li><strong style="color: #ffff66;">ë…¸ë€ìƒ‰ íƒ€ì›:</strong> ì¼ë°˜ ì†ì„±</li>
                <li><strong style="color: #66ff99;">ì´ˆë¡ìƒ‰ íƒ€ì›:</strong> ê¸°ë³¸í‚¤ (ë°‘ì¤„)</li>
            </ul>
        </div>

        <div class="info-box">
            <h3>ğŸ“Œ ì¹´ë””ë„ë¦¬í‹° (Cardinality)</h3>
            <ul>
                <li><strong>1:N</strong> - 1ëŒ€ ë‹¤ ê´€ê³„</li>
                <li>USERS(1) â†’ HAS â†’ PORTFOLIOS(N)</li>
                <li>USERS(1) â†’ TRADE â†’ TRANSACTIONS(N)</li>
            </ul>
        </div>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
